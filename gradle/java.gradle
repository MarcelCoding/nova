apply plugin: 'java'

repositories {
  jcenter()
}

sourceCompatibility = targetCompatibility = JavaVersion.VERSION_14

jar {
  manifest {
    attributes([
      'Specification-Title'     : project.name,
      'Specification-Vendor'    : 'Nova Project (https://github.com/getnova)',
      'Specification-Version'   : project.version,
      'Implementation-Vendor'   : 'Nova Project (https://github.com/getnova)',
      'Implementation-Timestamp': new Date().format('yyyy-MM-dd\'T\'HH:mm:ssZ')
    ])
  }
}

tasks.withType(JavaCompile) {
  options.encoding = 'UTF-8'
}

compileJava {
  inputs.property('moduleName', project.name.replace('-', '.'))
  doFirst {
    options.compilerArgs.addAll(['--module-path', classpath.asPath])
    classpath = files()
  }
}
